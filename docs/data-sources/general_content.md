---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "az-confidential_general_content Data Source - az-confidential"
subcategory: ""
description: |-
  Datasource unwrapping (potentially very long) content into state
  This resource is an illustration of how to overcome the limitation of RSA encryption
  which cannot, on its own, encrypt a very large file.
  How to create the ciphertext
  The ciphertext (i.e. the value of the content attribute) can be created with the encrypt_general_content content.
  This function will generate only the ciphertext. A complimentary tfgen https://github.com/aliakseiyanchuk/terraform-provider-az-confidential-tfgen
  tool can used to generate both ciphertext
  and the Terraform code template.
  As a pre-requisite, you need to have a public key of the key-encryption key the action provider instance will
  be using.
  Example how to create ciphertext using Terraform provider
  Consider the following example that creates a ciphertext that can be used for test and acceptance purposes for
  next year when the content should not be read more that 50 times:
  
  variable "content" {
    type = string
    description = "Content that needs to be wrapped"
  }
  
  variable "public_key_file" {
    type = string
    description = "Public key file"
  } 
  
  locals {
    public_key = file(var.public_key_file)
  }
  
  output "encrypted_content" {
    value = provider::az-confidential::encrypt_general_content(
      var.content,
      {
        expires_after = 365
        num_uses = 50
        provider_constraints = toset(["test", "acceptance"])
      },
      local.public_key
    )
  }
  
  
  Please refer to the encrypt_general_content function documentation ../functions/encrypt_general_content.md
  function documentation for the description of the parameters the function accepts.
  Create ciphertext using tfgen tool
  The ciphertext as well as a complete Terraform datasource template can be obtained using the tfgen command-line tool
  (see source code https://github.com/aliakseiyanchuk/terraform-provider-az-confidential-tfgen.)
  The prompt equivalent to the function invocation illustrated above is:
  
  tfgen -pubkey [path to the public key] \
    -provider-constraints demo,acceptance \
    -num-uses 50 \
    general content
  
  The tool will prompt for the interactive content input. Further options can be obtained by tfgen -help and
  tfgen general content -help commands.
---

# az-confidential_general_content (Data Source)

Datasource unwrapping (potentially very long) content into state

This resource is an illustration of how to overcome the limitation of RSA encryption
which cannot, on its own, encrypt a very large file.

## How to create the ciphertext
The ciphertext (i.e. the value of the `content` attribute) can be created with the `encrypt_general_content` content.
This function will generate only the ciphertext. A complimentary [`tfgen`](https://github.com/aliakseiyanchuk/terraform-provider-az-confidential-tfgen) 
tool can used to generate both ciphertext
and the Terraform code template.

As a pre-requisite, you need to have a public key of the key-encryption key the action provider instance will
be using.

### Example how to create ciphertext using Terraform provider

Consider the following example that creates a ciphertext that can be used for test and acceptance purposes for 
next year when the content should not be read more that 50 times:

```terraform
variable "content" {
  type = string
  description = "Content that needs to be wrapped"
}

variable "public_key_file" {
  type = string
  description = "Public key file"
} 

locals {
  public_key = file(var.public_key_file)
}

output "encrypted_content" {
  value = provider::az-confidential::encrypt_general_content(
    var.content,
    {
      expires_after = 365
      num_uses = 50
      provider_constraints = toset(["test", "acceptance"])
    },
    local.public_key
  )
}

```

Please refer to the [`encrypt_general_content` function documentation](../functions/encrypt_general_content.md)
function documentation for the description of the parameters the function accepts.

### Create ciphertext using `tfgen` tool


The ciphertext as well as a complete Terraform datasource template can be obtained using the `tfgen` command-line tool
(see [source code](https://github.com/aliakseiyanchuk/terraform-provider-az-confidential-tfgen).)
The prompt equivalent to the function invocation illustrated above is:
```shell
tfgen -pubkey [path to the public key] \
  -provider-constraints demo,acceptance \
  -num-uses 50 \
  general content
```
The tool will prompt for the interactive content input. Further options can be obtained by `tfgen -help` and
`tfgen general content -help` commands.

## Example Usage

```terraform
data "az-confidential_general_content" "confidential_content" {
  content = <<-CIPHERTEXT
           H4sIAAAAAAAA/1TTu9KyugKA4Z6rsHfviYAgfDOrEARPgBA52iHki+EQIAQFr37N+rv/Ld/++f9/Gdbx
           7K3MmxdaXvjnCCZDOUcOaQn/WW0Ea+4JW35W4k5RNrIibjTB7UrUQPSLGKIF+lkVHUNg5IxQDN6i4Dd5
           gVpEudnRkbOcUD7+rASfdW9SIvbXLVHb/Y+jkROKhXDp0c8KI4pY3oCioxxRLgh1kljbtCeFOx+nCXba
           FhRN6H57uu6QwvxqkJz6yda1fVV2qBuxpyOuDmE843FyNVmYCoeXTaSLuFZBH29TELDRxWbh59JOnbfb
           pwypr+RPaDqBnJ49jWGF2mg05OBmYCyUm7dEd1k9nmMZhaBTr1DT4BXPOL6Gkqy+Qb2rwpchjwB6WgQi
           Fu9xe4GZD8Qoch9CF/dS/vW72TVONzXlSfnC6SYd51xZ6KlSo5v+DPYDTDUm72R9OpZGMj/Uwd3pR2Ak
           kvCVPp987816fXD33Ae7dkqSRCMDnEr97qnoiFNkhsPN6e8iHJgGans/1QnArXRVnELYxoVqVPPSSuao
           G9zpiOtK3zpyI56ui9bOic2eYaGfsnd4EdXKrgnsLxmW0JI1GkiEpnxb4pSHYjWvkz1vl644rMHAxeq2
           3OTKXryvZTipFLw0c6iJePgu3K7Gxuwe7ja/vwSD+s/gpMua+tnkw1zdRni9L/qsveHRCOYpWWdjkckH
           PMnnHWh1eCn85L190bz6dsvZEU6uTQ57ff+JkrhqqJyRJMlMMUBy3J6oNaMLJMHlc1OOYfiKqWgahSZl
           GzHo7mHM7lh4kvXj2U7SrwSt4SDpcgRn1wT3db/hysPG2DOatA3g0Tky55FqT0M/szj4ZeWvQ4hTCDVU
           v7YanatTnw+kItNnSIzadNTNyy2AEl2tuxHTYG9N4z/CH02Wd/hb178BAAD//zThoj92AwAA
           CIPHERTEXT
  # The ciphertext above bears the following label(s):
  # - demo
  # - testing
  #
  # Labels are not considered confidential; however, you may want to remove
  # these before checking in this source code into your source control repo.
}

output "decrypted_content" {
  value = data.az-confidential_general_content.confidential_content.plaintext
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `content` (String) Encrypted secret value

### Optional

- `wrapping_key` (Attributes) Wrapping key to use for key and secret unwrapping purposes (see [below for nested schema](#nestedatt--wrapping_key))

### Read-Only

- `id` (String) Identifier of the decryption operation
- `plaintext` (String) Decrypted content
- `plaintext_b64` (String) Base64-encoded plaintext content
- `plaintext_hex` (String) Hex-encoded plaintext content

<a id="nestedatt--wrapping_key"></a>
### Nested Schema for `wrapping_key`

Optional:

- `algorithm` (String) Algorithm to unwrap the secret/content encryption key material
- `name` (String) Name of the wrapping key
- `vault_name` (String) Vault name containing the wrapping key
- `version` (String) Version of the wrapping key to use for unwrapping operations
