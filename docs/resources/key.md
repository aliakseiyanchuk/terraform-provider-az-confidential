---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "az-confidential_key Resource - az-confidential"
subcategory: ""
description: |-
  Creates a version of a key in the destination key vault from the
  provided ciphertext and additional parameters supplied as
  resource attributes.
  The resource can import RSA, Elliptic curve, and symmetric keys.
  The ciphertext should be obtained using the tfgen command-line tool
  (see source code https://github.com/aliakseiyanchuk/terraform-provider-az-confidential.)
  A typical command for RSA and EC keys  would be:
  
  tfgen -pubkey [path to the public key] \
  	-fixed-labels demo,test \
  	-output-vault [target vault name] -output-vault-object [target certificate name] \
  	key
  
  Symmetric keys need additional -symmetric flag:
  
  tfgen -pubkey [path to the public key] \
  	-fixed-labels demo,test \
  	-output-vault [target vault name] -output-vault-object [target certificate name] \
  	-symmetric \
  	key
---

# az-confidential_key (Resource)

Creates a version of a key in the destination key vault from the
provided ciphertext and additional parameters supplied as
resource attributes.

The resource can import RSA, Elliptic curve, and symmetric keys.

The ciphertext should be obtained using the `tfgen` command-line tool
(see [source code](https://github.com/aliakseiyanchuk/terraform-provider-az-confidential).)

A typical command for RSA and EC keys  would be:
```shell
tfgen -pubkey [path to the public key] \
	-fixed-labels demo,test \
	-output-vault [target vault name] -output-vault-object [target certificate name] \
	key
```
Symmetric keys need additional `-symmetric` flag:
```shell
tfgen -pubkey [path to the public key] \
	-fixed-labels demo,test \
	-output-vault [target vault name] -output-vault-object [target certificate name] \
	-symmetric \
	key
```

## Example Usage

```terraform
# Copyright (c) HashiCorp, Inc.

resource "az-confidential_key" "confidential_key" {
  content = "ol1+9tlZU+a6KEfHDPd/l4aSckVA1CmXs1clLVIazzKOSUu8qGa4Dg1NcUX1Du+iiCDzGCpSh+Vaaw7mXArGWFogq6FVhiAM8eLM862Lyog+8WoEiOLSggkuvr0TD0y3shRt8Se+rwzBm2/mDNbW+S2pBfqUmbDbX5YUctFXQxVxZiV4svXLBvIvee7JQYPTfnGekAXqSnxt5h1fCteybdz/pLZgsgtlUKPCMAUS4LYlhOmWB5fx9g11SF2qtNnC/1bLKIxAzibqjZa4uTd6+bHdSejiGkytTwsPijh52UD8etrAymNchHWpsiERh+BQqapjSdkH90esmHV9V+EI8TdkErFJRIMGqVGp/wxbIWHG99nTpaQz6cBo7DQf9x8Y9nOcwPFbHgAVjTpOisxwMjUQfJzPb96R7OkScCFxSZ9D1D8HyDoGWbR4d8F1C8Oci7AEAfWkVKREaCeZIbJoeBll4EAJPvICOvqfpp2YXpN572pTgOrFQGUd3R69oF4lII2/zdUDS4qoq/rkNa0IPVCHaBFZI6ACg2TUXERJiTOZOHPfwWkEw/e2PsCv+sXH9yNzRu5rJTcS0felOKPX+42+38n07HtWCmVb30I5bVNBsmqB1w6LI4uWVxEk+TiXAMtyaFQJfPpm5EQ3fwfiijBQDsdS6V6LPhdeHOWUh1g="

  # This secret is enabled for operation. Optionally, there is an option
  # to temporarily disable it.
  enabled = true

  key_opts = toset([
    "decrypt",
    "encrypt",
    "import",
    "sign",
    "unwrapKey",
    "verify",
    "wrapKey"
  ])

  # The secret version cannot be used before this date
  # Needs to be formatted yyyy-mm-ddTHH:MM:SS'Z'
  # not_before_date = "2025-06-08T18:40:26Z"

  # The secret version cannot be used after this date
  # Needs to be formatted yyyy-mm-dd'T'HH:MM:SS'Z'
  # not_after_date = "2026-06-08T18:40:26Z"

  tags = {
    # Fill the tags as desired
    # tagName =  "TagValue"
    env = "demo"
  }

  destination_key = {
    vault_name = "lspwd2-d-confidential-kv"
    name       = "importedkeyv1"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `content` (String) Encrypted secret value
- `destination_key` (Attributes) Specification of a vault where this secret needs to be stored (see [below for nested schema](#nestedatt--destination_key))
- `key_opts` (Set of String) Key operations are allowed

### Optional

- `enabled` (Boolean) Whether the version is enabled or not
- `hsm` (Boolean) Import this key into HSM
- `not_after_date` (String) Secret not usable before the provided UTC datetime (Y-m-d'T'H:M:S'Z')
- `not_before_date` (String) Secret not usable before the provided UTC datetime (Y-m-d'T'H:M:S'Z')
- `tags` (Map of String) Set of tags to be assigned to this secret
- `wrapping_key` (Attributes) Wrapping key to use for key and secret unwrapping purposes (see [below for nested schema](#nestedatt--wrapping_key))

### Read-Only

- `id` (String) Identifier of the decryption operation
- `key_version` (String) Version of the secret created in the target vault
- `public_key_openssh` (String) The OpenSSH encoded public key of this Key Vault Key.
- `public_key_pem` (String) PEM encoded RSA public key

<a id="nestedatt--destination_key"></a>
### Nested Schema for `destination_key`

Required:

- `name` (String) Name of the secret to store

Optional:

- `vault_name` (String) Vault where the secret needs to be stored. If omitted, defaults to the vault containing the wrapping key


<a id="nestedatt--wrapping_key"></a>
### Nested Schema for `wrapping_key`

Optional:

- `algorithm` (String) Algorithm to use for unwrapping secret/content encryption key
- `name` (String) Name of the wrapping key
- `vault_name` (String) Vault name containing the wrapping key
- `version` (String) Version of the wrapping key to use for unwrapping operations
